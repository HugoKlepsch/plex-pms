write_value_to_file() {
	local value="$1"
	local filename="${2}"
	local absolute_path

	# Check if value is provided (allow empty strings)
	if [[ $# -eq 0 ]]; then
		printf 'Error: Value is required\n' >&2
		return 1
	fi

	# Write the value to file using printf for robustness
	if printf '%s\n' "$value" > "$filename"; then
		# Get absolute path
		if absolute_path=$(realpath "$filename" 2>/dev/null); then
			printf '%s\n' "$absolute_path"
			return 0
		else
			printf 'Error: Failed to get absolute path for "%s"\n' "$filename" >&2
			return 1
		fi
	else
		printf 'Error: Failed to write to file "%s"\n' "$filename" >&2
		return 1
	fi
}

export smb_host="silverplate.local"
export smb_drive="plex"
export mount_dir="plex_data_mnt"
export mount_user="nobody"
export mount_group="plexapp"

# Plex vars
export PLEX_CLAIM="claim key"
export PLEX_TZONE="America/Toronto"
# Should be UID of mount_user
export PLEX_UID="1000"
# Should be GID of mount_group
export PLEX_GID="1000"
export PLEX_CONFIG_DIR="./plex_data_mnt/config"
export PLEX_TRANSCODE_DIR="./plex_data_mnt/transcode"
export PLEX_DATA_DIR="./plex_data_mnt/data"
# Plex 2
export PLEX2_CONFIG_DIR="$(pwd)/local_data_mnt/plex/plex_config/config"
export PLEX2_TRANSCODE_DIR="$(pwd)/local_data_mnt/plex/plex_transcode"
export PLEX2_DATA_DIR="$(pwd)/plex_data_mnt/plex2/data/media"

# Arrs
export ARR_DATA_DIR="$(pwd)/plex_data_mnt/plex2/data"
export ARR_MEDIA_DIR="$(pwd)/plex_data_mnt/plex2/data/media"
export ARR_TORRENT_DIR="$(pwd)/plex_data_mnt/plex2/data/torrents"
export PROWLARR_CONFIG_DIR="$(pwd)/local_data_mnt/plex/prowlarr_config"
export OVERSEERR_CONFIG_DIR="$(pwd)/local_data_mnt/plex/overseerr_config"
export SONARR_CONFIG_DIR="$(pwd)/local_data_mnt/plex/sonarr_config"
export RADARR_CONFIG_DIR="$(pwd)/local_data_mnt/plex/radarr_config"
export LIDARR_CONFIG_DIR="$(pwd)/local_data_mnt/plex/lidarr_config"
export READARR_CONFIG_DIR="$(pwd)/local_data_mnt/plex/readarr_config"
export BAZARR_CONFIG_DIR="$(pwd)/local_data_mnt/plex/bazarr_config"
# qBittorrent
export QBT_CONFIG_DIR="$(pwd)/local_data_mnt/plex/qbt_config"
export QBT_UID="1000"
export QBT_GID="1000"

# Network namespace w/ wireguard
export NAMESPACE="seedbox"
export WG_INTERFACE="wgseedbox"
export WG_IP="10.0.0.2/24"
export PEER_PUBLIC_KEY="peer_key="
export PEER_ENDPOINT="1.2.3.4:1234"
mkdir -p generated_config
export PRIVATE_KEY="your_priv_key="
export PRIVATE_KEY_PATH=$(write_value_to_file "${PRIVATE_KEY}" "generated_config/seedbox-privkey")
export PEER_PRESHARED_KEY="preshared_key="
export PEER_PRESHARED_KEY_PATH=$(write_value_to_file "${PEER_PRESHARED_KEY}" "generated_config/seedbox-presharedkey")
