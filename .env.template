write_value_to_file() {
	local value="$1"
	local filename="${2}"
	local absolute_path

	# Check if value is provided (allow empty strings)
	if [[ $# -eq 0 ]]; then
		printf 'Error: Value is required\n' >&2
		return 1
	fi

	# Write the value to file using printf for robustness
	if printf '%s\n' "$value" > "$filename"; then
		# Get absolute path
		if absolute_path=$(realpath "$filename" 2>/dev/null); then
			printf '%s\n' "$absolute_path"
			return 0
		else
			printf 'Error: Failed to get absolute path for "%s"\n' "$filename" >&2
			return 1
		fi
	else
		printf 'Error: Failed to write to file "%s"\n' "$filename" >&2
		return 1
	fi
}

export smb_host="silverplate.local"
export smb_drive="plex"
export mount_dir="plex_data_mnt"
export mount_user="nobody"
export mount_group="plexapp"

# Plex vars
export PLEX_CLAIM="claim key"
export PLEX_TZONE="America/Toronto"
export PLEX_CONFIG_DIR="./plex_data_mnt/config"
export PLEX_TRANSCODE_DIR="./plex_data_mnt/transcode"
export PLEX_DATA_DIR="./plex_data_mnt/data"
# Should be UID of mount_user
export PLEX_UID="1000"
# Should be GID of mount_group
export PLEX_GID="1000"

# Network namespace w/ wireguard
NAMESPACE="seedbox"
WG_INTERFACE="wgseedbox"
WG_IP="10.0.0.2/24"
PEER_PUBLIC_KEY="peer_key="
PEER_ENDPOINT="1.2.3.4:1234"
PRIVATE_KEY="your_priv_key="
PRIVATE_KEY_PATH=$(write_value_to_file "${PRIVATE_KEY}" "seedbox-privkey")
PEER_PRESHARED_KEY="preshared_key="
PEER_PRESHARED_KEY_PATH=$(write_value_to_file "${PEER_PRESHARED_KEY}" "seedbox-presharedkey")
